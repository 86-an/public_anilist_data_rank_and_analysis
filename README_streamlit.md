# AniList ランキング分析アプリ

📊 AniListのアニメ・マンガデータを分析・可視化するStreamlitアプリケーション

## 🎯 機能

### サイドバーフィルター
- **ジャンル選択**: アニメ / マンガ
- **アニメフィルター**:
  - タイトル
  - 声優
  - スタジオ  
  - ジャンル
  - スタッフ
  - キャラクター
- **マンガフィルター**:
  - タイトル

### メインタブ
1. **📈 ランキング**: スコア・お気に入り・人気度別ランキング
2. **📊 基礎統計**: データの統計サマリーと分布
3. **📊 ヒストグラム**: 数値データの分布分析（棒グラフも可能）
4. **🔍 散布図**: 2つの変数間の相関分析

## 🚀 使用方法

### 1. 前提条件
```bash
# 必要なパッケージがインストールされていることを確認
# （通常は自動でインストールされます）
pip install streamlit plotly pandas numpy
```

### 2. データベース準備
```bash
# データベースを構築（初回のみ）
python db/run_all_processes.py
```

### 3. アプリケーション起動
```bash
# メインアプリを起動
streamlit run streamlit_app.py

# または直接Pythonで実行
python -m streamlit run streamlit_app.py
```

### 4. アクセス
ブラウザで自動的に開かれるか、以下のURLにアクセス：
```
http://localhost:8501
```

## 📁 ファイル構成

```
├── streamlit_app.py          # メインアプリケーション
├── streamlit/               # Streamlitアプリフォルダ（予約）
├── db/                      # データベース関連
│   ├── anime_data.db        # アニメデータベース
│   ├── manga_data.db        # マンガデータベース
│   └── run_all_processes.py # データベース構築スクリプト
└── data/                    # 元データ（JSON）
    ├── anilist_rank_data_analysis_popular_all_anime.json
    └── anilist_rank_data_analysis_popular_all_manga.json
```

## 📊 分析機能詳細

### ランキング分析
- **基準選択**: 平均スコア / お気に入り数 / 人気度
- **表示件数**: 10-100件まで調整可能
- **可視化**: Top10の棒グラフ表示

### 基礎統計
- **数値データ**: 平均、中央値、標準偏差など
- **カテゴリデータ**: フォーマット、シーズン分布（円グラフ）
- **メトリクス**: 総データ数、年代範囲、平均スコア

### ヒストグラム分析
- **対象**: スコア、お気に入り数、人気度、年、エピソード数
- **グラフ形式**: ヒストグラム / 棒グラフ
- **ビン数調整**: 10-50まで調整可能
- **統計情報**: 平均値、中央値、最大・最小値

### 散布図分析
- **X軸・Y軸**: 任意の数値項目を選択可能
- **色分け**: フォーマット、シーズン、原作別
- **相関分析**: 相関係数の自動計算・表示
- **詳細情報**: ホバーでタイトル表示

## 🎮 操作方法

1. **サイドバー**でジャンル（アニメ/マンガ）を選択
2. **フィルター**で分析対象を絞り込み（オプション）
3. **タブ**で分析方法を選択
4. **設定パネル**で表示オプションを調整
5. **グラフ**をクリック・ホバーで詳細確認

## 💡 Tips

- **パフォーマンス**: 大量データの場合、フィルターを使用して絞り込み推奨
- **相関分析**: 散布図で数値間の関係性を発見可能
- **比較分析**: ランキングタブで異なる基準での順位を比較
- **データ探索**: ヒストグラムで外れ値や分布の特徴を把握

## 🐛 トラブルシューティング

### データベースエラー
```bash
# データベースを再構築
python db/run_all_processes.py
```

### パッケージエラー
```bash
# 必要パッケージの再インストール
pip install --upgrade streamlit plotly pandas numpy
```

### 起動エラー
```bash
# 直接Pythonで起動を試行
python -m streamlit run streamlit_app.py
```

## 🔄 データ更新

新しいデータで分析する場合：
1. `data/` フォルダのJSONファイルを更新
2. `python db/run_all_processes.py` でデータベース再構築
3. Streamlitアプリを再起動

---

🎉 **楽しい分析を！** 📈